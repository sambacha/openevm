.. py:module:: ethereum.genesis

Genesis Configuration
^^^^^^^^^^^^^^^^^^^^^

.. contents:: Table of Contents
    :backlinks: none
    :local:

Introduction
------------

Functionalities and entities to obtain the genesis configurations for
different chains.


.. only:: stage1

Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   ethereum.genesis.GenesisConfiguration



Functions
~~~~~~~~~

.. autoapisummary::
   :nosignatures:

   ethereum.genesis.get_genesis_configuration
   ethereum.genesis.hex_or_base_10_str_to_u256
   ethereum.genesis.add_genesis_block



Attributes
~~~~~~~~~~

.. autoapisummary::

   ethereum.genesis.Address


Module Details
---------------

Address
~~~~~~~



.. py:data:: Address
   
   

.. undocinclude:: /../src/ethereum/genesis.py
   :language: python
   :lines: 38-38


GenesisConfiguration
~~~~~~~~~~~~~~~~~~~~


Configuration for the first block of an Ethereum chain.

Specifies the allocation of ether set out in the pre-sale, and some of
the fields of the genesis block.


.. class:: GenesisConfiguration

   

   .. py:attribute:: chain_id
         :annotation: :ethereum.base_types.U64

      

   

   .. py:attribute:: difficulty
         :annotation: :ethereum.base_types.Uint

      

   

   .. py:attribute:: extra_data
         :annotation: :ethereum.base_types.Bytes

      

   

   .. py:attribute:: gas_limit
         :annotation: :ethereum.base_types.Uint

      

   

   .. py:attribute:: nonce
         :annotation: :ethereum.base_types.Bytes8

      

   

   .. py:attribute:: timestamp
         :annotation: :ethereum.base_types.U256

      

   

   .. py:attribute:: initial_accounts
         :annotation: :Dict[str, Dict]

      



get_genesis_configuration
~~~~~~~~~~~~~~~~~~~~~~~~~


.. function:: get_genesis_configuration(genesis_file: str) -> GenesisConfiguration
   :noindexentry:

   Obtain the genesis configuration from the given genesis json file.

   The genesis file should be present in the `assets` directory.

   :param genesis_file: The json file which contains the parameters for the genesis block
                        and the pre-sale allocation data.

   :returns: **configuration** -- The genesis configuration obtained from the json genesis file.
   :rtype: `GenesisConfiguration`




.. undocinclude:: /../src/ethereum/genesis.py
   :language: python
   :pyobject: get_genesis_configuration

hex_or_base_10_str_to_u256
~~~~~~~~~~~~~~~~~~~~~~~~~~


.. function:: hex_or_base_10_str_to_u256(balance: str) -> ethereum.base_types.U256
   :noindexentry:

   The genesis format can have balances and timestamps as either base 10
   numbers or 0x prefixed hex. This function supports both.




.. undocinclude:: /../src/ethereum/genesis.py
   :language: python
   :pyobject: hex_or_base_10_str_to_u256

add_genesis_block
~~~~~~~~~~~~~~~~~


.. function:: add_genesis_block(hardfork: Any, chain: Any, genesis: GenesisConfiguration) -> None
   :noindexentry:

   Adds the genesis block to an empty blockchain.

   The genesis block is an entirely sui generis block (unique) that is not
   governed by the general rules applying to all other Ethereum blocks.
   Instead, the only consensus requirement is that it must be identical to
   the block added by this function.

   The mainnet genesis configuration was originally created using the
   `mk_genesis_block.py` script. It is long since defunct, but is still
   available at https://github.com/ethereum/genesis_block_generator.

   The initial state is populated with balances based on the Ethereum presale
   that happened on the Bitcoin blockchain. Additional Ether worth 1.98% of
   the presale was given to the foundation.

   The `state_root` is set to the root of the initial state. The `gas_limit`
   and `difficulty` are set to suitable starting values. In particular the
   low gas limit made sending transactions impossible in the early stages of
   Frontier.

   The `nonce` field is `0x42` referencing Douglas Adams' "HitchHiker's Guide
   to the Galaxy".

   The `extra_data` field contains the hash of block `1028201` on
   the pre-launch Olympus testnet. The creation of block `1028201` on Olympus
   marked the "starting gun" for Ethereum block creation. Including its hash
   in the genesis block ensured a fair launch of the Ethereum mining process.

   The remaining fields are set to appropriate default values.

   On testnets the genesis configuration usually allocates 1 wei to addresses
   `0x00` to `0xFF` to avoid edgecases around precompiles being created or
   cleared (by EIP 161).

   :param hardfork: The module containing the initial hardfork
   :param chain: An empty `Blockchain` object.
   :param genesis: The genesis configuration to use.




.. undocinclude:: /../src/ethereum/genesis.py
   :language: python
   :pyobject: add_genesis_block
