\hypertarget{mocked__host_8hpp_source}{}\doxysection{mocked\+\_\+host.\+hpp}
\label{mocked__host_8hpp_source}\index{include/evmc/mocked\_host.hpp@{include/evmc/mocked\_host.hpp}}
\mbox{\hyperlink{mocked__host_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00001}00001 \textcolor{comment}{// EVMC: Ethereum Client-\/VM Connector API.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00002}00002 \textcolor{comment}{// Copyright 2019 The EVMC Authors.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00003}00003 \textcolor{comment}{// Licensed under the Apache License, Version 2.0.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00004}00004 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00006}00006 \textcolor{preprocessor}{\#include <\mbox{\hyperlink{evmc_8hpp}{evmc/evmc.hpp}}>}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00007}00007 \textcolor{preprocessor}{\#include <algorithm>}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00008}00008 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00009}00009 \textcolor{preprocessor}{\#include <unordered\_map>}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00010}00010 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00011}00011 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00012}00012 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceevmc}{evmc}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00013}00013 \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00015}00015 \textcolor{keyword}{using} \mbox{\hyperlink{namespaceevmc_a092c09f674d9cb5f0ba31d0f86537f4a}{bytes}} = std::basic\_string<uint8\_t>;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00016}00016 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00018}\mbox{\hyperlink{structevmc_1_1storage__value}{00018}} \textcolor{keyword}{struct }\mbox{\hyperlink{structevmc_1_1storage__value}{storage\_value}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00019}00019 \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00021}\mbox{\hyperlink{structevmc_1_1storage__value_a1d0d184e83df0d134fc9353f3cd7ced2}{00021}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{structevmc_1_1storage__value_a1d0d184e83df0d134fc9353f3cd7ced2}{value}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00024}\mbox{\hyperlink{structevmc_1_1storage__value_addde518355892c58bdbbf6383b6a6993}{00024}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{structevmc_1_1storage__value_addde518355892c58bdbbf6383b6a6993}{dirty}}\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00025}00025 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00027}\mbox{\hyperlink{structevmc_1_1storage__value_a3da155b6ec6cfa5cbd0b1bafb0927b70}{00027}}     \mbox{\hyperlink{group__EVMC_ga9f71195f3873f9979d81d7a5e1b3aaf0}{evmc\_access\_status}} \mbox{\hyperlink{structevmc_1_1storage__value_a3da155b6ec6cfa5cbd0b1bafb0927b70}{access\_status}}\{\mbox{\hyperlink{group__EVMC_gga9f71195f3873f9979d81d7a5e1b3aaf0a3a719b69a4c3f9d6b9913b47312b5a76}{EVMC\_ACCESS\_COLD}}\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00030}\mbox{\hyperlink{structevmc_1_1storage__value_a30176a848e7fbe3a6fd362af8de8d335}{00030}}     \mbox{\hyperlink{structevmc_1_1storage__value_a30176a848e7fbe3a6fd362af8de8d335}{storage\_value}}() noexcept = default;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00033}\mbox{\hyperlink{structevmc_1_1storage__value_a792d042c12bd60330a86035a2f35e1eb}{00033}}     \mbox{\hyperlink{structevmc_1_1storage__value}{storage\_value}}(const \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& \_value, \textcolor{keywordtype}{bool} \_dirty = false) noexcept  \textcolor{comment}{// NOLINT}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00034}00034       : \mbox{\hyperlink{structevmc_1_1storage__value_a1d0d184e83df0d134fc9353f3cd7ced2}{value}}\{\_value\}, \mbox{\hyperlink{structevmc_1_1storage__value_addde518355892c58bdbbf6383b6a6993}{dirty}}\{\_dirty\}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00035}00035     \{\}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00038}\mbox{\hyperlink{structevmc_1_1storage__value_a163f2a136412c940f283fc6544ae5bed}{00038}}     \mbox{\hyperlink{structevmc_1_1storage__value_a163f2a136412c940f283fc6544ae5bed}{storage\_value}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& \_value, \mbox{\hyperlink{group__EVMC_ga9f71195f3873f9979d81d7a5e1b3aaf0}{evmc\_access\_status}} \_access\_status) noexcept}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00039}00039       : \mbox{\hyperlink{structevmc_1_1storage__value_a1d0d184e83df0d134fc9353f3cd7ced2}{value}}\{\_value\}, \mbox{\hyperlink{structevmc_1_1storage__value_a3da155b6ec6cfa5cbd0b1bafb0927b70}{access\_status}}\{\_access\_status\}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00040}00040     \{\}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00041}00041 \};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00042}00042 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00044}\mbox{\hyperlink{structevmc_1_1MockedAccount}{00044}} \textcolor{keyword}{struct }\mbox{\hyperlink{structevmc_1_1MockedAccount}{MockedAccount}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00045}00045 \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00047}\mbox{\hyperlink{structevmc_1_1MockedAccount_a64c2a2707e01eed3806881e385b182ed}{00047}}     \textcolor{keywordtype}{int} \mbox{\hyperlink{structevmc_1_1MockedAccount_a64c2a2707e01eed3806881e385b182ed}{nonce}} = 0;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00048}00048 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00050}\mbox{\hyperlink{structevmc_1_1MockedAccount_a6da53c27a9106c49a59582494f8ef37a}{00050}}     \mbox{\hyperlink{namespaceevmc_a092c09f674d9cb5f0ba31d0f86537f4a}{bytes}} \mbox{\hyperlink{structevmc_1_1MockedAccount_a6da53c27a9106c49a59582494f8ef37a}{code}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00051}00051 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00053}\mbox{\hyperlink{structevmc_1_1MockedAccount_a4702798be7eb84d982ad66dd335d56a6}{00053}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{structevmc_1_1MockedAccount_a4702798be7eb84d982ad66dd335d56a6}{codehash}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00056}\mbox{\hyperlink{structevmc_1_1MockedAccount_a70a90d4df3e2a1b3f37a670835f5179a}{00056}}     \mbox{\hyperlink{structevmc_1_1bytes32}{uint256be}} \mbox{\hyperlink{structevmc_1_1MockedAccount_a70a90d4df3e2a1b3f37a670835f5179a}{balance}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00057}00057 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00059}\mbox{\hyperlink{structevmc_1_1MockedAccount_a969a6e55a2748908a48dd9f35c51e932}{00059}}     std::unordered\_map<bytes32, storage\_value> \mbox{\hyperlink{structevmc_1_1MockedAccount_a969a6e55a2748908a48dd9f35c51e932}{storage}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00062}\mbox{\hyperlink{structevmc_1_1MockedAccount_ac757b616c2622fcf5a361a8a08ba2bde}{00062}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{structevmc_1_1MockedAccount_ac757b616c2622fcf5a361a8a08ba2bde}{set\_balance}}(uint64\_t x) \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00063}00063     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00064}00064         \mbox{\hyperlink{structevmc_1_1MockedAccount_a70a90d4df3e2a1b3f37a670835f5179a}{balance}} = \mbox{\hyperlink{structevmc_1_1bytes32}{uint256be}}\{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00065}00065         \textcolor{keywordflow}{for} (std::size\_t i = 0; i < \textcolor{keyword}{sizeof}(x); ++i)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00066}00066             \mbox{\hyperlink{structevmc_1_1MockedAccount_a70a90d4df3e2a1b3f37a670835f5179a}{balance}}.\mbox{\hyperlink{structevmc__bytes32_a695eaf3c428daee54ce15c8252edc133}{bytes}}[\textcolor{keyword}{sizeof}(\mbox{\hyperlink{structevmc_1_1MockedAccount_a70a90d4df3e2a1b3f37a670835f5179a}{balance}}) -\/ 1 -\/ i] = \textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(x >> (8 * i));}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00067}00067     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00068}00068 \};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00069}00069 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00071}\mbox{\hyperlink{classevmc_1_1MockedHost}{00071}} \textcolor{keyword}{class }\mbox{\hyperlink{classevmc_1_1MockedHost}{MockedHost}} : \textcolor{keyword}{public} \mbox{\hyperlink{classevmc_1_1Host}{Host}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00072}00072 \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00073}00073 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00075}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record}{00075}}     \textcolor{keyword}{struct }\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record}{log\_record}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00076}00076     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00078}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_a968c68ed59820fcb7d3cfc2d9f18edaa}{00078}}         \mbox{\hyperlink{structevmc_1_1address}{address}} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_a968c68ed59820fcb7d3cfc2d9f18edaa}{creator}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00081}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_af14109822fc0d0cbc98da01a4474ad3d}{00081}}         \mbox{\hyperlink{namespaceevmc_a092c09f674d9cb5f0ba31d0f86537f4a}{bytes}} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_af14109822fc0d0cbc98da01a4474ad3d}{data}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00082}00082 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00084}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_ad25378459fe50c4f317aeff51ebb30c0}{00084}}         std::vector<bytes32> \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_ad25378459fe50c4f317aeff51ebb30c0}{topics}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00085}00085 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00087}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_ab83bb9261867dde22d6079e5ce31c334}{00087}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_ab83bb9261867dde22d6079e5ce31c334}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record}{log\_record}}\& other) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00088}00088         \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00089}00089             \textcolor{keywordflow}{return} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_a968c68ed59820fcb7d3cfc2d9f18edaa}{creator}} == other.creator \&\& \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_af14109822fc0d0cbc98da01a4474ad3d}{data}} == other.data \&\& \mbox{\hyperlink{structevmc_1_1MockedHost_1_1log__record_ad25378459fe50c4f317aeff51ebb30c0}{topics}} == other.topics;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00090}00090         \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00091}00091     \};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00092}00092 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00094}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record}{00094}}     \textcolor{keyword}{struct }\mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record}{selfdestruct\_record}}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00095}00095     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00097}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a251b6d2036724f1928d45a6b28b7b28c}{00097}}         \mbox{\hyperlink{structevmc_1_1address}{address}} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a251b6d2036724f1928d45a6b28b7b28c}{selfdestructed}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00098}00098 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00100}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a2fff44cb856c4cd971d94f2ac0b5e145}{00100}}         \mbox{\hyperlink{structevmc_1_1address}{address}} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a2fff44cb856c4cd971d94f2ac0b5e145}{beneficiary}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00101}00101 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00103}\mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a48f39f0a1b0fe63542ec8146a1e1f6c4}{00103}}         \textcolor{keywordtype}{bool} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a48f39f0a1b0fe63542ec8146a1e1f6c4}{operator==}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record}{selfdestruct\_record}}\& other) \textcolor{keyword}{const} \textcolor{keyword}{noexcept}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00104}00104         \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00105}00105             \textcolor{keywordflow}{return} \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a251b6d2036724f1928d45a6b28b7b28c}{selfdestructed}} == other.selfdestructed \&\& \mbox{\hyperlink{structevmc_1_1MockedHost_1_1selfdestruct__record_a2fff44cb856c4cd971d94f2ac0b5e145}{beneficiary}} == other.beneficiary;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00106}00106         \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00107}00107     \};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00110}\mbox{\hyperlink{classevmc_1_1MockedHost_a5bc5bfc2b23104dc5554f87c51383b47}{00110}}     std::unordered\_map<address, MockedAccount> \mbox{\hyperlink{classevmc_1_1MockedHost_a5bc5bfc2b23104dc5554f87c51383b47}{accounts}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00113}\mbox{\hyperlink{classevmc_1_1MockedHost_addf01838d4c15228e746caa0a645a3b1}{00113}}     \mbox{\hyperlink{structevmc__tx__context}{evmc\_tx\_context}} \mbox{\hyperlink{classevmc_1_1MockedHost_addf01838d4c15228e746caa0a645a3b1}{tx\_context}} = \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00114}00114 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00116}\mbox{\hyperlink{classevmc_1_1MockedHost_a4cdb6de6b81f9845eb6079f5729e0805}{00116}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{classevmc_1_1MockedHost_a4cdb6de6b81f9845eb6079f5729e0805}{block\_hash}} = \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00117}00117 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00119}\mbox{\hyperlink{classevmc_1_1MockedHost_a473ec63bcb8b786c5fb1b097cfcfb8c0}{00119}}     \mbox{\hyperlink{structevmc__result}{evmc\_result}} \mbox{\hyperlink{classevmc_1_1MockedHost_a473ec63bcb8b786c5fb1b097cfcfb8c0}{call\_result}} = \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00122}\mbox{\hyperlink{classevmc_1_1MockedHost_ac4acf299c63beb5134fede0d0a5f7c1f}{00122}}     \textcolor{keyword}{mutable} std::vector<int64\_t> \mbox{\hyperlink{classevmc_1_1MockedHost_ac4acf299c63beb5134fede0d0a5f7c1f}{recorded\_blockhashes}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00123}00123 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00125}\mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{00125}}     \textcolor{keyword}{mutable} std::vector<address> \mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00129}\mbox{\hyperlink{classevmc_1_1MockedHost_a5ab49cfd8bc76f9dab117946a5c12efa}{00129}}     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classevmc_1_1MockedHost_a5ab49cfd8bc76f9dab117946a5c12efa}{max\_recorded\_account\_accesses}} = 200;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00130}00130 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00132}\mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{00132}}     std::vector<evmc\_message> \mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00133}00133 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00136}\mbox{\hyperlink{classevmc_1_1MockedHost_a78ad202959aa8d416faf715ab6f7f687}{00136}}     \textcolor{keyword}{static} \textcolor{keyword}{constexpr} \textcolor{keyword}{auto} \mbox{\hyperlink{classevmc_1_1MockedHost_a78ad202959aa8d416faf715ab6f7f687}{max\_recorded\_calls}} = 100;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00139}\mbox{\hyperlink{classevmc_1_1MockedHost_a6f6b51ddda349341a158456a180f7d9e}{00139}}     std::vector<log\_record> \mbox{\hyperlink{classevmc_1_1MockedHost_a6f6b51ddda349341a158456a180f7d9e}{recorded\_logs}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00142}\mbox{\hyperlink{classevmc_1_1MockedHost_a0456263e1326f91a27c0e3a0381d967f}{00142}}     std::vector<selfdestruct\_record> \mbox{\hyperlink{classevmc_1_1MockedHost_a0456263e1326f91a27c0e3a0381d967f}{recorded\_selfdestructs}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00143}00143 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00144}00144 \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00146}\mbox{\hyperlink{classevmc_1_1MockedHost_a07d9cb06c3f78bbb2323467271709467}{00146}}     std::vector<bytes> \mbox{\hyperlink{classevmc_1_1MockedHost_a07d9cb06c3f78bbb2323467271709467}{m\_recorded\_calls\_inputs}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00150}\mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{00150}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr)\textcolor{keyword}{ const}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00151}00151 \textcolor{keyword}{    }\{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00152}00152         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.empty())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00153}00153             \mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.reserve(\mbox{\hyperlink{classevmc_1_1MockedHost_a5ab49cfd8bc76f9dab117946a5c12efa}{max\_recorded\_account\_accesses}});}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00154}00154 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00155}00155         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.size() < \mbox{\hyperlink{classevmc_1_1MockedHost_a5ab49cfd8bc76f9dab117946a5c12efa}{max\_recorded\_account\_accesses}})}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00156}00156             \mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.emplace\_back(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00157}00157     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00158}00158 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00159}00159 \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00161}\mbox{\hyperlink{classevmc_1_1MockedHost_a53a463e19e4908022137ce53715c2dce}{00161}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{classevmc_1_1MockedHost_a53a463e19e4908022137ce53715c2dce}{account\_exists}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00162}00162     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00163}00163         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00164}00164         \textcolor{keywordflow}{return} \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.count(addr) != 0;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00165}00165     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00166}00166 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00168}\mbox{\hyperlink{classevmc_1_1MockedHost_a6336919efaf07ad1e9e4f725a86ebdca}{00168}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{classevmc_1_1MockedHost_a6336919efaf07ad1e9e4f725a86ebdca}{get\_storage}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr, \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& key) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00169}00169     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00170}00170         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00171}00171 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00172}00172         \textcolor{keyword}{const} \textcolor{keyword}{auto} account\_iter = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.find(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00173}00173         \textcolor{keywordflow}{if} (account\_iter == \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00174}00174             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00175}00175 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00176}00176         \textcolor{keyword}{const} \textcolor{keyword}{auto} storage\_iter = account\_iter-\/>second.storage.find(key);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00177}00177         \textcolor{keywordflow}{if} (storage\_iter != account\_iter-\/>second.storage.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00178}00178             \textcolor{keywordflow}{return} storage\_iter-\/>second.value;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00179}00179         \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00180}00180     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00183}\mbox{\hyperlink{classevmc_1_1MockedHost_aad63cd61357052ab1fa87e6ff372b3d7}{00183}}     \mbox{\hyperlink{group__EVMC_gae012fd6b8e5c23806b507c2d3e9fb1aa}{evmc\_storage\_status}} \mbox{\hyperlink{classevmc_1_1MockedHost_aad63cd61357052ab1fa87e6ff372b3d7}{set\_storage}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00184}00184                                     \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& key,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00185}00185                                     \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& value) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00186}00186     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00187}00187         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00188}00188 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00189}00189         \textcolor{comment}{// Get the reference to the old value.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00190}00190         \textcolor{comment}{// This will create the account in case it was not present.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00191}00191         \textcolor{comment}{// This is convenient for unit testing and standalone EVM execution to preserve the}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00192}00192         \textcolor{comment}{// storage values after the execution terminates.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00193}00193         \textcolor{keyword}{auto}\& old = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}[addr].storage[key];}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00194}00194 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00195}00195         \textcolor{comment}{// Follow https://eips.ethereum.org/EIPS/eip-\/1283 specification.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00196}00196         \textcolor{comment}{// WARNING! This is not complete implementation as refund is not handled here.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00197}00197 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00198}00198         \textcolor{keywordflow}{if} (old.value == value)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00199}00199             \textcolor{keywordflow}{return} \mbox{\hyperlink{group__EVMC_ggae012fd6b8e5c23806b507c2d3e9fb1aaad6d527edcbe8a63edad5be80f252330c}{EVMC\_STORAGE\_UNCHANGED}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00200}00200 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00201}00201         \mbox{\hyperlink{group__EVMC_gae012fd6b8e5c23806b507c2d3e9fb1aa}{evmc\_storage\_status}} status\{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00202}00202         \textcolor{keywordflow}{if} (!old.dirty)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00203}00203         \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00204}00204             old.dirty = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00205}00205             \textcolor{keywordflow}{if} (!old.value)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00206}00206                 status = \mbox{\hyperlink{group__EVMC_ggae012fd6b8e5c23806b507c2d3e9fb1aaa8afd1741edf799d44264654d9f04a5a9}{EVMC\_STORAGE\_ADDED}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00207}00207             \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (value)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00208}00208                 status = \mbox{\hyperlink{group__EVMC_ggae012fd6b8e5c23806b507c2d3e9fb1aaaf102ce749767d5277923c221089da2c6}{EVMC\_STORAGE\_MODIFIED}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00209}00209             \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00210}00210                 status = \mbox{\hyperlink{group__EVMC_ggae012fd6b8e5c23806b507c2d3e9fb1aaae5b6ea5ec988f3b3ceb323ce3c0fa53f}{EVMC\_STORAGE\_DELETED}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00211}00211         \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00212}00212         \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00213}00213             status = \mbox{\hyperlink{group__EVMC_ggae012fd6b8e5c23806b507c2d3e9fb1aaa072394aca7925f8de8facf8f8a5e477c}{EVMC\_STORAGE\_MODIFIED\_AGAIN}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00214}00214 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00215}00215         old.value = value;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00216}00216         \textcolor{keywordflow}{return} status;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00217}00217     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00218}00218 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00220}\mbox{\hyperlink{classevmc_1_1MockedHost_a401e74178baba9772638e6b4309e9bee}{00220}}     \mbox{\hyperlink{structevmc_1_1bytes32}{uint256be}} \mbox{\hyperlink{classevmc_1_1MockedHost_a401e74178baba9772638e6b4309e9bee}{get\_balance}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00221}00221     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00222}00222         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00223}00223         \textcolor{keyword}{const} \textcolor{keyword}{auto} it = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.find(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00224}00224         \textcolor{keywordflow}{if} (it == \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00225}00225             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00226}00226 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00227}00227         \textcolor{keywordflow}{return} it-\/>second.balance;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00228}00228     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00229}00229 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00231}\mbox{\hyperlink{classevmc_1_1MockedHost_a0ecf2503e3af4ed98cce8eff45385a33}{00231}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classevmc_1_1MockedHost_a0ecf2503e3af4ed98cce8eff45385a33}{get\_code\_size}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00232}00232     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00233}00233         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00234}00234         \textcolor{keyword}{const} \textcolor{keyword}{auto} it = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.find(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00235}00235         \textcolor{keywordflow}{if} (it == \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00236}00236             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00237}00237         \textcolor{keywordflow}{return} it-\/>second.code.size();}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00238}00238     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00239}00239 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00241}\mbox{\hyperlink{classevmc_1_1MockedHost_a776687379553c67540c8c16df9e8f226}{00241}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{classevmc_1_1MockedHost_a776687379553c67540c8c16df9e8f226}{get\_code\_hash}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00242}00242     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00243}00243         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00244}00244         \textcolor{keyword}{const} \textcolor{keyword}{auto} it = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.find(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00245}00245         \textcolor{keywordflow}{if} (it == \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00246}00246             \textcolor{keywordflow}{return} \{\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00247}00247         \textcolor{keywordflow}{return} it-\/>second.codehash;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00248}00248     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00249}00249 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00251}\mbox{\hyperlink{classevmc_1_1MockedHost_a2679f00109fab1c027fb789b83a25d20}{00251}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{classevmc_1_1MockedHost_a2679f00109fab1c027fb789b83a25d20}{copy\_code}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00252}00252                      \textcolor{keywordtype}{size\_t} code\_offset,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00253}00253                      uint8\_t* buffer\_data,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00254}00254                      \textcolor{keywordtype}{size\_t} buffer\_size) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00255}00255     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00256}00256         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00257}00257         \textcolor{keyword}{const} \textcolor{keyword}{auto} it = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.find(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00258}00258         \textcolor{keywordflow}{if} (it == \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}.end())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00259}00259             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00260}00260 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00261}00261         \textcolor{keyword}{const} \textcolor{keyword}{auto}\& code = it-\/>second.code;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00262}00262 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00263}00263         \textcolor{keywordflow}{if} (code\_offset >= code.size())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00264}00264             \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00265}00265 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00266}00266         \textcolor{keyword}{const} \textcolor{keyword}{auto} n = std::min(buffer\_size, code.size() -\/ code\_offset);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00267}00267 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00268}00268         \textcolor{keywordflow}{if} (n > 0)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00269}00269             std::copy\_n(\&code[code\_offset], n, buffer\_data);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00270}00270         \textcolor{keywordflow}{return} n;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00271}00271     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00272}00272 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00274}\mbox{\hyperlink{classevmc_1_1MockedHost_aa0b0cfd19450eaf220cde06ab1d96858}{00274}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classevmc_1_1MockedHost_aa0b0cfd19450eaf220cde06ab1d96858}{selfdestruct}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr, \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& beneficiary) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00275}00275     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00276}00276         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00277}00277         \mbox{\hyperlink{classevmc_1_1MockedHost_a0456263e1326f91a27c0e3a0381d967f}{recorded\_selfdestructs}}.push\_back(\{addr, beneficiary\});}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00278}00278     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00281}\mbox{\hyperlink{classevmc_1_1MockedHost_ad7f341e9bc49fe73286c65bfc3d56ec3}{00281}}     \mbox{\hyperlink{classevmc_1_1result}{result}} \mbox{\hyperlink{classevmc_1_1MockedHost_ad7f341e9bc49fe73286c65bfc3d56ec3}{call}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc__message}{evmc\_message}}\& msg) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00282}00282     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00283}00283         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(msg.recipient);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00284}00284 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00285}00285         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}}.empty())}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00286}00286         \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00287}00287             \mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}}.reserve(\mbox{\hyperlink{classevmc_1_1MockedHost_a78ad202959aa8d416faf715ab6f7f687}{max\_recorded\_calls}});}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00288}00288             \mbox{\hyperlink{classevmc_1_1MockedHost_a07d9cb06c3f78bbb2323467271709467}{m\_recorded\_calls\_inputs}}.reserve(\mbox{\hyperlink{classevmc_1_1MockedHost_a78ad202959aa8d416faf715ab6f7f687}{max\_recorded\_calls}});  \textcolor{comment}{// Iterators will not invalidate.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00289}00289         \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00290}00290 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00291}00291         \textcolor{keywordflow}{if} (\mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}}.size() < \mbox{\hyperlink{classevmc_1_1MockedHost_a78ad202959aa8d416faf715ab6f7f687}{max\_recorded\_calls}})}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00292}00292         \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00293}00293             \mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}}.emplace\_back(msg);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00294}00294             \textcolor{keyword}{auto}\& call\_msg = \mbox{\hyperlink{classevmc_1_1MockedHost_af4487c7cb827ef8ce54da187d109189a}{recorded\_calls}}.back();}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00295}00295             \textcolor{keywordflow}{if} (call\_msg.input\_size > 0)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00296}00296             \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00297}00297                 \mbox{\hyperlink{classevmc_1_1MockedHost_a07d9cb06c3f78bbb2323467271709467}{m\_recorded\_calls\_inputs}}.emplace\_back(call\_msg.input\_data, call\_msg.input\_size);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00298}00298                 \textcolor{keyword}{const} \textcolor{keyword}{auto}\& input\_copy = \mbox{\hyperlink{classevmc_1_1MockedHost_a07d9cb06c3f78bbb2323467271709467}{m\_recorded\_calls\_inputs}}.back();}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00299}00299                 call\_msg.input\_data = input\_copy.data();}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00300}00300             \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00301}00301         \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00302}00302         \textcolor{keywordflow}{return} \mbox{\hyperlink{classevmc_1_1result}{result}}\{\mbox{\hyperlink{classevmc_1_1MockedHost_a473ec63bcb8b786c5fb1b097cfcfb8c0}{call\_result}}\};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00303}00303     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00304}00304 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00306}\mbox{\hyperlink{classevmc_1_1MockedHost_a45187586bde530ca7beb157467c12733}{00306}}     \mbox{\hyperlink{structevmc__tx__context}{evmc\_tx\_context}} \mbox{\hyperlink{classevmc_1_1MockedHost_a45187586bde530ca7beb157467c12733}{get\_tx\_context}}() const noexcept\textcolor{keyword}{ override }\{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classevmc_1_1MockedHost_addf01838d4c15228e746caa0a645a3b1}{tx\_context}}; \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00307}00307 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00309}\mbox{\hyperlink{classevmc_1_1MockedHost_ace3ba78141acc06849d3b34382466e36}{00309}}     \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} \mbox{\hyperlink{classevmc_1_1MockedHost_ace3ba78141acc06849d3b34382466e36}{get\_block\_hash}}(int64\_t block\_number) \textcolor{keyword}{const} \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00310}00310     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00311}00311         \mbox{\hyperlink{classevmc_1_1MockedHost_ac4acf299c63beb5134fede0d0a5f7c1f}{recorded\_blockhashes}}.emplace\_back(block\_number);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00312}00312         \textcolor{keywordflow}{return} \mbox{\hyperlink{classevmc_1_1MockedHost_a4cdb6de6b81f9845eb6079f5729e0805}{block\_hash}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00313}00313     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00314}00314 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00316}\mbox{\hyperlink{classevmc_1_1MockedHost_a4263c29b321dbecfcbb4357a469a3bee}{00316}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{classevmc_1_1MockedHost_a4263c29b321dbecfcbb4357a469a3bee}{emit\_log}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00317}00317                   \textcolor{keyword}{const} uint8\_t* data,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00318}00318                   \textcolor{keywordtype}{size\_t} data\_size,}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00319}00319                   \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}} topics[],}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00320}00320                   \textcolor{keywordtype}{size\_t} topics\_count) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00321}00321     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00322}00322         \mbox{\hyperlink{classevmc_1_1MockedHost_a6f6b51ddda349341a158456a180f7d9e}{recorded\_logs}}.push\_back(\{addr, \{data, data\_size\}, \{topics, topics + topics\_count\}\});}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00323}00323     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00324}00324 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00341}\mbox{\hyperlink{classevmc_1_1MockedHost_a51f9acf40acec535549d32c7ab079b9e}{00341}}     \mbox{\hyperlink{group__EVMC_ga9f71195f3873f9979d81d7a5e1b3aaf0}{evmc\_access\_status}} \mbox{\hyperlink{classevmc_1_1MockedHost_a51f9acf40acec535549d32c7ab079b9e}{access\_account}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00342}00342     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00343}00343         \textcolor{comment}{// Check if the address have been already accessed.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00344}00344         \textcolor{keyword}{const} \textcolor{keyword}{auto} already\_accessed =}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00345}00345             std::find(\mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.begin(), \mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.end(), addr) !=}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00346}00346             \mbox{\hyperlink{classevmc_1_1MockedHost_aee945d218d656a7788d4fce5f30db3ca}{recorded\_account\_accesses}}.end();}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00347}00347 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00348}00348         \mbox{\hyperlink{classevmc_1_1MockedHost_a0c00a74cb2326e57a3a6a844432d72e1}{record\_account\_access}}(addr);}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00349}00349 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00350}00350         \textcolor{comment}{// Accessing precompiled contracts is always warm.}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00351}00351         \textcolor{keywordflow}{if} (addr >= 0x0000000000000000000000000000000000000001\_address \&\&}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00352}00352             addr <= 0x0000000000000000000000000000000000000009\_address)}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00353}00353             \textcolor{keywordflow}{return} \mbox{\hyperlink{group__EVMC_gga9f71195f3873f9979d81d7a5e1b3aaf0a584ba0f1ab5c1e5e8a126fdcdde5d994}{EVMC\_ACCESS\_WARM}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00354}00354 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00355}00355         \textcolor{keywordflow}{return} already\_accessed ? \mbox{\hyperlink{group__EVMC_gga9f71195f3873f9979d81d7a5e1b3aaf0a584ba0f1ab5c1e5e8a126fdcdde5d994}{EVMC\_ACCESS\_WARM}} : \mbox{\hyperlink{group__EVMC_gga9f71195f3873f9979d81d7a5e1b3aaf0a3a719b69a4c3f9d6b9913b47312b5a76}{EVMC\_ACCESS\_COLD}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00356}00356     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00357}00357 }
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00371}\mbox{\hyperlink{classevmc_1_1MockedHost_a759d289a03d7ebeac0b727938d9ee521}{00371}}     \mbox{\hyperlink{group__EVMC_ga9f71195f3873f9979d81d7a5e1b3aaf0}{evmc\_access\_status}} \mbox{\hyperlink{classevmc_1_1MockedHost_a759d289a03d7ebeac0b727938d9ee521}{access\_storage}}(\textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1address}{address}}\& addr, \textcolor{keyword}{const} \mbox{\hyperlink{structevmc_1_1bytes32}{bytes32}}\& key) \textcolor{keyword}{noexcept} \textcolor{keyword}{override}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00372}00372     \{}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00373}00373         \textcolor{keyword}{auto}\& value = \mbox{\hyperlink{namespaceevmc_a85ff0436efd1c2e8b065f73b361269e1}{accounts}}[addr].storage[key];}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00374}00374         \textcolor{keyword}{const} \textcolor{keyword}{auto} access\_status = value.access\_status;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00375}00375         value.access\_status = \mbox{\hyperlink{group__EVMC_gga9f71195f3873f9979d81d7a5e1b3aaf0a584ba0f1ab5c1e5e8a126fdcdde5d994}{EVMC\_ACCESS\_WARM}};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00376}00376         \textcolor{keywordflow}{return} access\_status;}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00377}00377     \}}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00378}00378 \};}
\DoxyCodeLine{\Hypertarget{mocked__host_8hpp_source_l00379}00379 \}  \textcolor{comment}{// namespace evmc}}

\end{DoxyCode}
